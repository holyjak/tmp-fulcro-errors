= Appendix: Fulcro Errors and Warnings, Explained

== Fulcro warning and error logs

Explanations of the Fulcro warnings errors that you might see in the browser Console.

=== Errors

==== api_middleware

[[]]`e` Parser threw an exception on `query`::
TODO

==== application

[[]]`e` Cannot compute shared::
TODO

[[]]`e` Render listener failed.::
TODO

[[]]Mount cannot find DOM node `node` to mount `(comp/class->registry-key root)`::
TODO

==== browser_edn_store

[[]]`e` Local storage denied. `edn`::
TODO

[[]]`e` Cannot list items in storage.::
TODO

[[]]`e` Cannot list items in storage.::
TODO

[[]]`e` Load failed.::
TODO

[[]]`e` Delete failed.::
TODO

[[]]`e` Cannot update edn.::
TODO

==== components

[[]]Cannot create proper fulcro component, as *app* isn't bound. This happens when something renders a Fulcro component outside of Fulcro's render context. See `with-parent-context`.::
TODO

[[]]Query ID received no class (if you see this warning, it probably means metadata was lost on your query) `(ex-info "" {})`::
TODO

[[]]A Fulcro component was rendered outside of a parent context. This probably means you are using a library that has you pass rendering code to it as a lambda. Use `with-parent-context` to fix this.::
TODO

[[]]Props middleware seems to have the corrupted props for  `(component-name class)`::
TODO

[[]]Props passed to `(component-name class)` are of the type `(type (gobj/get props "fulcro$value"))` instead of a map. Perhaps you meant to `map` the component over the props?::
TODO

[[]]`e` Query normalization failed. Perhaps you tried to set a query with a syntax error?::
TODO

[[]]Set query failed. There was no query ID. Use a class or factory for the second argument.::
TODO

[[]]Unable to set query. Invalid arguments.::
TODO

[[]]Unable to set query. Invalid arguments.::
TODO

[[]]Cannot re-render a non-component::
TODO

==== config

[[]]Unable to read configuration file  `file-path`::
TODO

==== data_targeting

[[]]Replacement path must be a vector. You passed:  `data-path`::
TODO

[[]]Path for replacement must be a vector::
TODO

[[]]Path for replacement must end in a vector index::
TODO

[[]]Target vector for replacement does not have an item at index  `index`::
TODO

==== do_not_use

[[]]`(str "The composed root query is not valid EQL. The app may crash. See `(comp/get-query " (some-> query meta :component component-name-fn) ")`")` `query`::
TODO

==== durable_mutations

[[]]Save failed. Running transaction now, non-durably.::
TODO

[[]]The transaction that submitted this mutation did not assign it a persistent store ID. This probably means you did not submit it as a durable mutation.::
TODO

[[]]INTERNAL ERROR: TXN ID MISSING!::
TODO

[[]]Failed to update durable mutation!::
TODO

==== dynamic_routing

[[]]Component must have an ident for routing to work properly: `(comp/component-name class)`::
TODO

[[]]Cannot evalutate route change. Assuming ok. Exception message:  `(ex-message e)`::
TODO

[[]]`fn-name`  was invoked with the ident  `ident`  which doesn't seem to match the ident of the wrapping component (class  `*target-class*`  , ident [ `(first (comp/ident *target-class* {}))`  ...])::
TODO

[[]]apply-route* was called without a proper :router argument.::
TODO

[[]]apply-route* for router  `router-class` was given a target that did not have a component.  Did you remember to call route-deferred or route-immediate?::
TODO

[[]]There is a router in state that is missing an ID. This indicates that you forgot to compose it into your initial state! It will fail to operate properly.::
TODO

[[]]`(quote com.fulcrologic.fulcro.routing.dynamic-routing/target-ready)` should route to `target` but there is no data in the DB for the ident. Perhaps you supplied a wrong ident?::
TODO

[[]]dr/target-ready! was called but there was no router waiting for the target listed:  `target` This could mean you sent one ident, and indicated ready on another.::
TODO

[[]]will-enter for router target `(comp/component-name target)` did not return a valid ident. Instead it returned:  `target-ident`::
TODO

[[]]will-enter for router target `(comp/component-name target)` did not wrap the ident in route-immediate or route-deferred.::
TODO

[[]]Could not find route targets for new-route `new-route`::
TODO

[[]]You are routing to a router  `router-id` whose state was not composed into the app from root. Please check your :initial-state.::
TODO

[[]]Route target  `(comp/component-name t)` of router `(comp/component-name router-instance)` does not declare a valid :route-segment. Route segments must be non-empty vector that contain only strings and keywords::
TODO

==== error_boundaries

[[]]`(ex-message error)`::
TODO

==== file_upload

[[]]Unable to associate a file with a mutation `file`::
TODO

[[]]`e` Unable to attach uploads to the transaction.::
TODO

[[]]Incoming transaction with uploads had no files attached.::
TODO

[[]]`e` Exception while converting mutation with file uploads.::
TODO

==== form_state

[[]]`(str "FORM NOT NORMALIZED: " entity-ident)`::
TODO

[[]]`(str "FORM NOT NORMALIZED: " entity-ident)`::
TODO

==== http_remote

[[]]Attempt to request alternate response from HTTP remote from multiple items in a single transaction. This could mean more than one transaction got combined into a single request.::
TODO

[[]]Unable to extract response from XhrIO Object `e`::
TODO

[[]]Client response middleware threw an exception.  `e` . Defaulting to raw response.::
TODO

[[]]Client middleware threw an exception `middleware-exception`::
TODO

[[]]`e` Result handler for remote `url` failed with an exception.::
TODO

[[]]`e` Update handler for remote `url` failed with an exception.::
TODO

[[]]`(ex-info "Remote Error" error)`::
TODO

[[]]`e` Error handler for remote `url` failed with an exception.::
TODO

[[]]`e` Send aborted due to middleware failure ::
TODO

==== icons

[[]]ui-icon was given an icon name that cannot be found:  `icon`::
TODO

==== ident_optimized_render

[[]]Query was empty. Refresh failed for  `(type c)`::
TODO

==== indexing

[[]]Component `(comp/component-name this)` supplied an invalid ident `ident` using props `props`::
TODO

[[]]Unable to re-index root. App was not set in the mutation env.::
TODO

==== inspect_client

[[]]Cannot send to inspect. Channel closed.::
TODO

[[]]Transact on invalid uuid `app-uuid`::
TODO

[[]]Element picker not installed in app. You must add it to you preloads.::
TODO

[[]]Unable to find app/state for preview.::
TODO

==== legacy_ui_routers

[[]]Routing tree does not contain a vector of routing-instructions for handler  `handler`::
TODO

[[]]Routing tree does not contain a vector of routing-instructions for handler  `handler`::
TODO

[[]]`(str "Route load failed for " route-to-load ". Attempting retry.")`::
TODO

[[]]Attempt to trigger a route that was pending, but that wasn't done loading (or failed to load).::
TODO

[[]]Routing failed! `t`::
TODO

==== load_cache

[[]]Load failed. Using cached value.::
TODO

[[]]LOAD CACHE NOT INSTALLED! Did you remember to use `with-load-cache` on your app?::
TODO

==== merge

[[]]`e` Unable to mark missing on result. Returning unmarked result::
TODO

[[]]Cannot merge component  `component`  because it does not have an ident!::
TODO

[[]]merge-component!: component must implement Ident. Merge skipped.::
TODO

==== mock_server_remote

[[]]`e` Result handler failed with an exception.::
TODO

[[]]`e` Error handler failed with an exception.::
TODO

==== multiple_roots_renderer

[[]]Register-root cannot find app. Pass your Fulcro app via options.::
TODO

[[]]Deregister-root cannot find app. Pass your Fulcro app via options.::
TODO

==== mutations

[[]]ui/set-props requires component to have an ident.::
TODO

[[]]ui/toggle requires component to have an ident.::
TODO

[[]]Unknown app state mutation. Have you required the file with your mutations? `(:key ast)`::
TODO

==== react_interop

[[]]The first argument to an HOC factory MUST be the parent component instance.::
TODO

[[]]hoc-factory MUST be used with a Fulcro Class::
TODO

==== synchronous_tx_processing

[[]]`e` Post processing step failed.::
TODO

[[]]`e` The result-action mutation handler for mutation `(:dispatch-key original-ast-node)` threw an exception.::
TODO

[[]]Network result for `remote` does not have a valid node on the active queue!::
TODO

[[]]Old queue changed!::
TODO

[[]]`e` Error processing tx queue!::
TODO

==== tx_processing

[[]]`e` Send threw an exception for tx: `(futil/ast->query (:com.fulcrologic.fulcro.algorithms.tx-processing/ast send-node))`::
TODO

[[]]Transmit was not defined on remote `remote-name`::
TODO

[[]]`e` Dispatch for mutation `(some-> env :ast futil/ast->query)` failed with an exception. No dispatch generated.::
TODO

[[]]`e` The `action` section of mutation `mutation-symbol` threw an exception.::
TODO

[[]]`e` The `action` section threw an exception for mutation:  `(:dispatch-key original-ast-node)`::
TODO

[[]]Network result for `remote` does not have a valid node on the active queue!::
TODO

[[]]Remote dispatch for `remote` returned an invalid value. `remote-desire`::
TODO

[[]]`e` The result-action mutation handler for mutation `(:dispatch-key original-ast-node)` threw an exception.::
TODO

[[]]`e` Progress action threw an exception in mutation `(:dispatch-key original-ast-node)`::
TODO

[[]]Cannot abort network requests. The remote has no abort support!::
TODO

[[]]`e` Failed to abort send node::
TODO

==== ui_state_machines

[[]]Invalid (nil) event ID::
TODO

[[]]Activate called for invalid state:  `state-id` on `(asm-id env)`::
TODO

[[]]Unable to find alias in state machine: `alias`::
TODO

[[]]Attempt to set a value on an invalid alias: `alias`::
TODO

[[]]Cannot run load. Counld not derive Fulcro class (and none was configured) for  `actor-name`::
TODO

[[]]Cannot run load. query-key cannot be nil.::
TODO

[[]]INTERNAL ERROR: Cancel predicate was nil for timer  `timer-id`::
TODO

[[]]Attempted to trigger event  `event-id` on state machine `asm-id` , but that state machine has not been started (call begin! first).::
TODO

[[]]`e` Handler for event `event-id` threw an exception for ASM ID `asm-id`::
TODO

[[]]The value given for actor `actor-id` had (or was) an invalid ident: `v`::
TODO

=== Warnings

==== application

[[cannot-unmount-application]]Cannot umount application because either the umount function is missing or the node was not recorded. Perhaps it wasn't mounted?::
-

==== components

[[get-ident-with-nil-props]]get-ident was invoked on `(component-name x)` with nil props (this could mean it wasn't yet mounted): `x`::
It could also mean that the component is missing data in the Fulcro client DB (for example beacuse you have routed to a component without having loaded data for it) or that there is a missing "edge" somewhere between the root and this component. Use the DB Explorer in Fulcro Inspect and see whether you can navigate (click-through) from the top down to the component. See also <<_a_warning_about_ident_and_link_queries,A Warning About Ident and Link Queries>>.

[[get-ident-invalid-ident]]get-ident returned an invalid ident: `id` `<component display name>`::
An ident must be a vector of two elements, where the first one is a keyword. You can define it either via a keyword, a template, or a lambda - see <<_ident_generation,Ident Generation>>.

[[get-ident-invalid-class]]get-ident called with something that is either not a class or does not implement ident: `<class>`::

[[react-key-not-simple-scalar]]React key for `(component-name class)` is not a simple scalar value. This could cause spurious component remounts.::
The value returned by the `:keyfn` you have defined for the component's factory should be a simple scalar such as a string or a number. React does need something that can be checked using _javascript_ equality. 

[[string-ref-not-function]]String ref on `(component-name class)` should be a function.::
I.e. the props should include something like `:ref (fn [r] (gobj/set this "svg" r))`, not simply `"svg"`. See the <<D3,D3 example>>.

[[constant-ident-no-initial-state]]Component `(component-name c)` has a constant ident (id in the ident is not nil for empty props), but it has no initial state. This could cause this component's props to appear as nil unless you have a mutation or load that connects it to the graph after application startup.::
The client DB must contain non-nil (but possibly empty) data for this component (i.e. you need to run at least `(assoc-in your-client-db <the ident>) {}`).
Or set its `:initial-state` to at least `{}`.

[[initial-state-incomplete]]Component `(component-name c)` does not INCLUDE initial state for `(component-name target)` at join key `k` ; however,  `(component-name target)` HAS initial state. This probably means your initial state graph is incomplete and props on `(component-name target)` will be nil.::
You need to make sure that initial state is composed up all the way to the root component, otherwise Fulcro will not "see" it. I.e. you should likely <<_initial_state_2,define
`:initial-state`>> on this component using either the template (`{<the join key> {}}`) or lambda (`(fn [params] {<the join key> (comp/get-initial-state <target component> {}))`) form.

==== data_fetch

[[union-needs-more-children]]Unions are not designed to be used with fewer than two children. Check your calls to Fulcro load functions where the :without set contains `(pr-str union-key)`::
-

[[boolean-marker-not-supported]]Boolean load marker no longer supported.::
Load marker should be a keyword unique to what you are loading, not `true`. See <<_working_with_normalized_load_markers>>.

[[data-load-targets-table]]Data load targets of two elements imply that you are targeting a table entry. That is probably incorrect. Normalization targets tables. Targeting is for creating missing edges, which are usually 3-tuples.::
Targeting via `targeting/append-to` etc. is intended to add a connection from one entity to another so you should provide it with the triplet `<component id prop> - <id value> - prop-name` such as `[:person/id "123" :person/spouse]`. If you want to get the data inserted at the given path instead of the default one then use `:target` directly with the 2-element vector instead of using the targeting namespace. Ex.: `:target [:component/id :user-session]`.

[[dont-use-query-transform-default]]Query-transform-default is a dangerous option that can break general merge behaviors. Do not use it.::
Use fulcro-app's `:global-eql-transform` instead.

==== data_targeting

[[target-unsuported-case]]Target processing found an unsupported case.::
Perhaps you have not defined it using `targeting/append-to` or similar?

==== denormalize

[[denormalize-loop-detected]]Loop detected in data graph at  `entity` . Recursive query stopped.::
The recursive query has hit an ident that it already has included before, which indicates a loop. If the loop is desired, use a recursive query with an explicit limit instead of just `...`. See <<_recursive_queries,Recursive Queries>> for details.

==== dom

[[dom-type-mismatch]]There is a mismatch for the data type of the value on an input with value `element-value`. This will cause the input to miss refreshes. In general you should force the :value of an input to be a string since that is how values are stored on most real DOM elements.::
-

==== durable_mutations

[[multiple-mutations-rewritten]]Write-through transactions with multiple mutations will be rewritten to submit one per mutation.::
-

==== dynamic_routing

[[routing-will-leave-deprecated]]DEPRECATED USE OF `:will-leave` to check for allowable routing. You should add :allow-route-change? to: `(comp/component-name this)`::
-

[[routing-multiple-target-matches]]More than one route target matches `path`::
Check the `:route-segment` of your target components.

==== http_remote

[[transit-decode-failed]]Transit decode failed!::
The body was either not transit or you have not installed the correct transit read/write handlers. See `com.fulcrologic.fulcro.algorithms.transit/install-type-handler!` and how it is used to handle tempids.

==== tenacious_remote

[[remote-retry-limit-exceeded]]Tenacious remote exceeded retry limit `max-attempts`::
-

==== inspect.transit

[[transit-encode-failed]]Transit was unable to encode a value.::
Make sure that you have installed transit write handlers for any data types not supported by default. See `com.fulcrologic.fulcro.algorithms.transit/install-type-handler!`.

==== tx_processing

[[tx-missing-ident]]Synchronous transaction was submitted on the app or a component without an ident. No UI refresh will happen.::
Synchronous transactions will not cause a full UI refresh. It will only target refreses to the component passed as an argument, which must have an ident. If it does not, no UI will be refreshed, which likely is not what you wanted. Perhaps try to use the normal, asynchronous transaction (e.g. `transact!` instead of `transact!!` or transact! with `:synchronously? true`). See <<Inputs32,Fulcro 3.2 Inputs>>.

[[tx-remote-abort-not-supported]]Remote does not support abort. Clearing the queue, but a spurious result may still appear.::
-

==== ui_state_machines

[[uism-sm-not-in-state]]Attempt to get an ASM path `ks` for a state machine that is not in Fulcro state. ASM ID: `asm-id`::
This can happen e.g. if you are rendering routers before you’ve started their associated UISMs (and is mostly harmless) - you can use `app/set-root!` with initialize state, then `dr/initialize!` or `dr/change-route!`, then `app/mount!` with NO initialize state to get rid of most or all of those. Basically: Make sure you’ve explicitly routed to a leaf (target) before mounting. In other cases - make sure the UISM has been started before you try to use it.

[[uism-fallback-missing-event]]A fallback occurred, but no event was defined by the client. Sending generic ::uism/load-error event.::
-

[[uism-unexpected-event]]UNEXPECTED EVENT: Did not find a way to handle event `event-id` in the current active state: `current-state`::
-